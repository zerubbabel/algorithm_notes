
<!-- saved from url=(0044)http://www.csie.ntnu.edu.tw/~u91029/Set.html -->
<html lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" href="./Set_files/style.css">
<title>演算法筆記 - Set</title></head><body>
<div class="a" id="1"><div class="h">
<p class="b">Set</p>
</div><div class="c">
<p class="t">Set</p>
<img src="./Set_files/Set1.png">
<p>set 是指數學名詞「集合」。在這裡我們只考慮元素為整數的集合。集合有幾點特性：</p>
<p>一、空集合。</p>
<p>二、集合中的元素不會重複。</p>

</div></div><div class="a" id="2"><div class="h">
<p class="b">Set 資料結構 : <br>循序儲存</p>
</div><div class="c">
<p class="t">Array</p>
<img src="./Set_files/Set2.png">
<p>要表達一個集合，可以直觀的用一條一維的 int 陣列：將集合裡的所有元素，依序放進陣列中。再用一個變數，記錄元素總數。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">struct</span><span>&nbsp;</span><span class="word">Set</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">1000</span><span>];&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;可存入1000個元素</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">num</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;記錄集合中有多少元素</span></li><li><span>};</span></li><li>&nbsp;</li><li><span class="word">Set</span><span>&nbsp;</span><span class="word">set1</span><span>,&nbsp;</span><span class="word">set2</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;建立兩個集合</span></li></ol></div>
<p>如果你對 C++ STL 很熟，用 vector 就更方便了！</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="word">vector</span><span>&lt;</span><span class="type">int</span><span>&gt;&nbsp;</span><span class="word">set1</span><span>(</span><span class="value">1000</span><span>);</span></li><li><span class="word">vector</span><span>&lt;</span><span class="type">int</span><span>&gt;&nbsp;</span><span class="word">set2</span><span>(</span><span class="value">1000</span><span>);</span></li></ol></div>
<p>然而，以這種資料結構，做聯集、交集、差集之類的運算，則會相當麻煩，也會比較慢。各位可以自己試試看！</p>
<p>可以直接使用 STL 的 set_union() 、 set_intersection() 。</p>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/4/496.html">496</a> <a href="http://uva.onlinejudge.org/external/120/12069.html">12069</a></p>
<p class="t">List</p>
<img src="./Set_files/Set3.png">
<p>原理就和 Array 完全一樣。 Array 是一個一個數字連著放， List 則是一個一個數字連成串。</p>
<p class="t">Binary Search Tree</p>
<img src="./Set_files/Set4.png">
<p>只要是可以儲存大量數字的資料結構，都可以用來儲存一個集合。因此二元搜尋樹當然也能勝任這項任務！</p>
<p>可以直接使用 STL 的 set ，不過它沒有聯集、交集、差集等功能，必須自己另外設計程式碼。也許你內心有點芥蒂；沒錯， STL 的 set ，的確是名不符實的 set 。</p>

</div></div><div class="a" id="3"><div class="h">
<p class="b">Set 資料結構 : <br>索引儲存</p>
</div><div class="c">
<p class="t">Array</p>
<img src="./Set_files/Set5.png">
<p>另外一種表達集合的方法，是用一條一維的 bool 陣列：集合裡若有 x 這個元素，就讓 array[x] 這個位置為 true ，否則為 false 。</p>
<p>它的壞處就是數值有界限、受陣列大小影響。但是，以這種資料結構，做聯集、交集、差集之類的運算，則會比較快，時間複雜度為 O( 陣列大小 ) 。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">set</span><span>[</span><span class="value">1000</span><span>];&nbsp;</span><span class="comment">//&nbsp;一個集合，元素的數值範圍為0到999</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;加入元素</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">add_element</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">element</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">a</span><span>[</span><span class="word">element</span><span>]&nbsp;=&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;除去元素</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">delete_element</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">element</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">a</span><span>[</span><span class="word">element</span><span>]&nbsp;=&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;聯集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">b</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">c</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)&nbsp;</span><span class="word">c</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;||&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;交集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">intersection</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">b</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">c</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)&nbsp;</span><span class="word">c</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&amp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;差集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">difference</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">b</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">c</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)&nbsp;</span><span class="word">c</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&amp;&nbsp;!</span><span class="word">b</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;補集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">complement</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">b</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;!</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;判斷是否為空集合</span></li><li><span class="type">bool</span><span>&nbsp;</span><span class="word">empty</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">a</span><span>[</span><span class="word">i</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;判斷是否沒有交集</span></li><li><span class="type">bool</span><span>&nbsp;</span><span class="word">disjoint</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">b</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&amp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;判斷a有沒有包含b</span></li><li><span class="type">bool</span><span>&nbsp;</span><span class="word">contain</span><span>(</span><span class="type">bool</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">1000</span><span>],&nbsp;</span><span class="type">bool</span><span>&nbsp;</span><span class="word">b</span><span>[</span><span class="value">1000</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">1000</span><span>;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(!</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&amp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/6/608.html">608</a> <a href="http://uva.onlinejudge.org/external/6/665.html">665</a> <a href="http://uva.onlinejudge.org/external/102/10227.html">10227</a> <a href="http://uva.onlinejudge.org/external/126/12650.html">12650</a></p>
<p class="t">Bit Array （ Bit Vector ）（ Bitset ）</p>
<img src="./Set_files/Set6.png">
<p>還有一種方法，是用 bit 來代替 bool 變數。在電腦當中，一個 bit 只有 0 和 1 兩種值，類似於 bool 變數，兩者都可以用來表示一個集合元素存不存在。利用 bit 們來表達集合，可以節省儲存空間，也可以節省運算時間。</p>
<p>一個 int 變數所使用的記憶體大小為 32bit ，可以當作是 32 個數字的集合。需要更多 bit 的話，就建立一條陣列吧！</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">typedef</span><span>&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">Bitset</span><span>[</span><span class="value">100</span><span>];&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;一個集合，元素的數值範圍為&nbsp;0&nbsp;到&nbsp;3199</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;求出element所在的陣列格子，即是element除以32的商數</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">get_pos</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">element</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">element</span><span>&nbsp;&gt;&gt;&nbsp;</span><span class="value">5</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;求出element在陣列格子當中是第幾個bit，即是element除以32的餘數</span></li><li><span class="comment">//&nbsp;然後讓一個bit位移至適當位置，以利計算</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">get_bit</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">element</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="value">1</span><span>&nbsp;&lt;&lt;&nbsp;(</span><span class="word">element</span><span>&nbsp;&amp;&nbsp;</span><span class="value">31</span><span>);</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;加入元素</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">add_element</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">element</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">a</span><span>[</span><span class="word">get_pos</span><span>(</span><span class="word">element</span><span>)]&nbsp;|=&nbsp;</span><span class="word">get_bit</span><span>(</span><span class="word">element</span><span>);</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;除去元素</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">delete_element</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">element</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">a</span><span>[</span><span class="word">get_pos</span><span>(</span><span class="word">element</span><span>)]&nbsp;&amp;=&nbsp;~</span><span class="word">get_bit</span><span>(</span><span class="word">element</span><span>);</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;聯集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">b</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">c</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">c</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;|&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;交集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">intersection</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">b</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">c</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">c</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;差集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">difference</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">b</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">c</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">c</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&nbsp;~</span><span class="word">b</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;補集</span></li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">complement</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">b</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;!</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;判斷是否為空集合</span></li><li><span class="type">bool</span><span>&nbsp;</span><span class="word">empty</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">a</span><span>[</span><span class="word">i</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;判斷是否沒有交集</span></li><li><span class="type">bool</span><span>&nbsp;</span><span class="word">disjoint</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">b</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="comment">//&nbsp;判斷a有沒有包含b</span></li><li><span class="type">bool</span><span>&nbsp;</span><span class="word">contain</span><span>(</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Bitset</span><span>&nbsp;</span><span class="word">b</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;</span><span class="word">i</span><span>&lt;</span><span class="value">100</span><span>;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(~</span><span class="word">a</span><span>[</span><span class="word">i</span><span>]&nbsp;&amp;&nbsp;</span><span class="word">b</span><span>[</span><span class="word">i</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">false</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="keyword">true</span><span>;</span></li><li><span>}</span></li></ol></div>
<p>可以直接使用 STL 的 bitset 。</p>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/112/11218.html">11218</a></p>

</div></div><div class="a" id="4"><div class="h">
<p class="b">Set 資料結構 : <br> Hash Table</p>
</div><div class="c">
<p class="t">Hash Function 【這不是資料結構】</p>
<p>int hash( 一筆資料 ) {return  一個數值 ;}</p>
<p>一筆資料重新表示成一個數值。該數值稱作雜湊值。</p>
<img src="./Set_files/HashTable1.png">
<p>資料庫的觀點：資料進行索引，以利管理。密碼學的觀點：資料進行編碼，以求隱蔽。</p>
<p>理想情況是相同資料有著相同雜湊值、相異資料有著相異雜湊值，如此就能直接使用雜湊值來分辨資料。</p>
<p>可以直接使用 STL 的 hash 。</p>
<p class="t">Hashing 【這不是資料結構】</p>
<p>array[ hash( 一筆資料 ) ] =  一筆資料 ;</p>
<p>繁中「雜湊」，簡中「散列」。一筆資料套用 hash function 得到雜湊值，作為陣列索引值，用陣列儲存資料。設計 hash function 時，必須確保雜湊值不會超出陣列邊界。</p>
<img src="./Set_files/HashTable2.png">
<p>無論是相同資料、相異資料，只要有著相同雜湊值，就會儲存到陣列的同一個格子。此時有三種應對方案：</p>
<p>一、每個陣列元素皆改為 List ，串接資料。</p>
<p>二、放到下一格；如果下一格已經使用，就再往下一格。</p>
<p>三、新資料直接覆蓋舊資料。</p>
<p>此處以一為主。插入的時間複雜度是 O(1) 。刪除、搜尋的最佳時間複雜度是 O(1) ，相異資料有著相異雜湊值；最差時間複雜度是 O(N) ，相異資料有著相同雜湊值。</p>
<p class="t">Hash Table</p>
<img src="./Set_files/HashTable3.png">
<p>當元素的數值範圍很大，甚至元素不是整數，此時可以利用 hash function 得到一個索引值，而不會超出陣列邊界。</p>
<p>數值範圍小，索引儲存是首選，省時間費空間；數值範圍大，循序儲存是首選，省空間費時間。 hash table 兩者兼具，介於中間。</p>
<p>可以直接使用 STL 的 unordered_set 、 unordered_multiset 。</p>
<p class="t">Cuckoo Filter</p>
<img src="./Set_files/HashTable4.png">
<p>建立多個 hash function 。當陣列格子已有資料，就換 hash function 、換雜湊值。</p>
<p>有興趣的讀者，可以自行上網搜尋資料。</p>
<p class="t">Bloom Filter</p>
<img src="./Set_files/HashTable5.png">
<p>套用多個 hash function ，同時儲存於多個欄位，分散風險。只要發現對應欄位幾乎都是 1 ，就推定元素存在於集合當中。缺點是可能製造原本不存在的元素。</p>
<p>如果懶得設計 hash function ，可以用兩個湊出多個： hashᵢ(n) = hash₁(n) + i ⋅ hash₂(n) 。關鍵字 Kirsch-Mitzenmacher 。</p>
<p>有興趣的讀者，可以自行上網搜尋資料。</p>

</div></div><div class="a" id="5"><div class="h">
<p class="b">Disjoint Sets</p>
</div><div class="c">
<p class="t">Disjoint Sets</p>
<p>「互斥集」的意思是一堆集合們，大家擁有的元素都不相同，也就是說這些集合們之間都沒有交集。</p>
<pre>A = {1, 3, 7, 8}
B = {4, 5}
C = {2}
A、B、C構成Disjoint sets。

D = {1, 2, 3}
A、B、C、D不是Disjoint sets。
</pre>
<p>舉例來說，有十個學生，要製作分組報告，分成四組，這四組就是 Disjoint sets 。</p>
<pre>甲君、乙君、丙君、丁君、戊君、己君、庚君、辛君、壬君、癸君
共十人，分成了四組：

第一組：甲君、丙君、辛君、壬君
第二組：乙君
第三組：丁君、戊君、己君
第四組：庚君、癸君

這四組構成Disjoint sets。
</pre>
<p class="t">union 、 find 、 split</p>
<p>由於集合們都沒有交集，因此諸如交集運算、差集運算等等結果很明顯的運算，就不必特別說明。這裡只談 union 、 find 、 split 這三個運算： union 就是將兩個集合做聯集，合併成一個集合。 find 就是找找看一個元素是在哪個集合裡面。 split 就是把一個集合拆成兩個集合。</p>
<p>以下只談 union 、 find ，暫不介紹 split 。</p>

</div></div><div class="a" id="6"><div class="h">
<p class="b">Disjoint Sets 資料結構 : <br> List</p>
</div><div class="c">
<p class="t">Disjoint-sets List</p>
<p>其原理正是先前介紹的「循序儲存」。</p>
<img src="./Set_files/DisjointSets1.png">

</div></div><div class="a" id="7"><div class="h">
<p class="b">Disjoint Sets 資料結構 : <br> Array</p>
</div><div class="c">
<p class="t">Disjoint-sets Array</p>
<p>其原理正是先前介紹的「索引儲存」。</p>
<img src="./Set_files/DisjointSets2.png">
<p>讓一條 int 陣列的第 x 格代表第 x 人，格子裡填上這個人所屬的團體編號。若兩個人在同一團體，他們的格子裡就會有相同的團體編號。這是很直觀的方式。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">g</span><span>[</span><span class="value">10</span><span>];&nbsp;&nbsp;</span><span class="comment">//&nbsp;每個人所屬的團體編號</span></li><li><span class="word">g</span><span>[</span><span class="value">0</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第0人在第0團</span></li><li><span class="word">g</span><span>[</span><span class="value">1</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第1人在第0團</span></li><li><span class="word">g</span><span>[</span><span class="value">2</span><span>]&nbsp;=&nbsp;</span><span class="value">2</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第2人在第2團</span></li><li><span>…&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span class="word">g</span><span>[</span><span class="value">9</span><span>]&nbsp;=&nbsp;</span><span class="value">2</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第9人在第2團</span></li></ol></div>
<p class="t">初始化</p>
<img src="./Set_files/DisjointSets3.png">
<p>一開始大家還沒開始分團的時候，其實可以想做是：每個人都不同團，每個人都是自己一人一團。有個方便的初始值設定方法，就是將第 x 格的值設成 x ，這樣每個人就都是不同團體的了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">initialize</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">x</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">x</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">x</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Find:  找出一個人在哪一團？</p>
<img src="./Set_files/DisjointSets4.png">
<p>直接看團體編號。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">find</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>];</span></li><li><span>}</span></li></ol></div>
<p class="t">Equivalent Relation:  兩個人是否同團？</p>
<p>直接看團體編號。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">equivlence</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;==&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>];</span></li><li><span>}</span></li></ol></div>
<p class="t">Union:  兩個人想合併自己所屬團體</p>
<img src="./Set_files/DisjointSets5.png">
<p>現在有兩團想要合併成一團，交涉的人分別是 x 和 y 。 x y 想要合併成一團，只要把所有與 x y 同團的人，都填上同一個團體編號就行了。取 x  和 y 其中一團的團體編號，當作新的團體編號，如此一來就不需要額外的編號了。（這裡我們不考慮有人不服氣的問題。）</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;要是x&nbsp;y不同團，才設成同團，以節省時間。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;!=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">gmin</span><span>&nbsp;=&nbsp;</span><span class="word">min</span><span>(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>],&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>]);&nbsp;</span><span class="comment">//&nbsp;團體編號較小者</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">gmax</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>],&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>]);&nbsp;</span><span class="comment">//&nbsp;團體編號較大者</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;把所有與x&nbsp;y同團的人，都填上同一個團體編號。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;設定為團體編號較小者，</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;讓所有團體編號維持是從零0開始的連續數字。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">gmax</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">gmin</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li></ol></div>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;精簡程式碼結構</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;==&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>])&nbsp;</span><span class="keyword">return</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;為了精簡程式碼，不管團體編號大小了。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">gx</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>],&nbsp;</span><span class="word">gy</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">gx</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">gy</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Number of Sets:  全部總共幾個團體？</p>
<p>兩團合併成一團後，團體數就會減少一團。只需修改一下 union 的程式碼。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">groups</span><span>&nbsp;=&nbsp;</span><span class="value">10</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;團體數</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;==&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>])&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">groups</span><span>--;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;兩團合併成一團後，團體數就會減少一團。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">gx</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>],&nbsp;</span><span class="word">gy</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">gx</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Cardinality of a Set:  一個團體總共幾個人？</p>
<p>一個一個數是差勁的方法：</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="comment">//&nbsp;計算出x所屬的團體的人數</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">cardinality</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">gn</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>];&nbsp;&nbsp;</span><span class="comment">//&nbsp;先找到團體編號</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">people</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;&nbsp;</span><span class="comment">//&nbsp;計算出團體編號為gn的人數</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">gn</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">people</span><span>++;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">people</span><span>;</span></li><li><span>}</span></li></ol></div>
<p>比較好的方法是：另外建立一條陣列去記錄每個團體的人數吧！陣列第 x 格填入團體編號為 x 的人數。要找出一個團體的人數，就直接從陣列裡面找。</p>
<p>以團體的角度來看：兩團合併成一團後，團體人數就會改變。以人的角度來看：當一個人所屬的團體被改變時，就調整人數。所以只要修改一下 union 的程式碼就可以了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">size</span><span>[</span><span class="value">10</span><span>];&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;每個團體的人數</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">initialize</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">i</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="value">1</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;團體編號從0到9，每團都是一個人。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;==&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>])&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">groups</span><span>--;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">gx</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>],&nbsp;</span><span class="word">gy</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">gx</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">gy</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">gx</span><span>]--;&nbsp;</span><span class="comment">//&nbsp;團體編號為gx的人數減少一人</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">gy</span><span>]++;&nbsp;</span><span class="comment">//&nbsp;團體編號為gy的人數增加一人</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">cardinality</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">size</span><span>[</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]];</span></li><li><span>}</span></li></ol></div>
<p class="t">根據團體的人數多寡來做 union</p>
<p>合併團體時，將小的團體併入大的團體，可以節省一點點設定團體和增減人數所需的時間。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]&nbsp;==&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>])&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">groups</span><span>--;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">glarge</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">x</span><span>],&nbsp;</span><span class="word">gsmall</span><span>&nbsp;=&nbsp;</span><span class="word">g</span><span>[</span><span class="word">y</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">size</span><span>[</span><span class="word">x</span><span>]&nbsp;&lt;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">y</span><span>])&nbsp;</span><span class="word">swap</span><span>(</span><span class="word">glarge</span><span>,&nbsp;</span><span class="word">gsmall</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">gsmall</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">g</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">glarge</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">gsmall</span><span>]--;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">glarge</span><span>]++;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li></ol></div>
<p class="t">Singleton Set:  團體是否合併過？</p>
<p>自己一個人一組，沒有 union 過。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">singleton</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">size</span><span>[</span><span class="word">g</span><span>[</span><span class="word">x</span><span>]]&nbsp;==&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">時間複雜度</p>
<p>union 為 O(N) ， find 、 equivalence 、 cardinality 、 singleton 為 O(1) 。</p>
<p>如果有 N 個人，全部的人都 union 過一遍，每次 union 要花 O(N) 時間，總共花 O(N²) 時間。</p>
<p class="t">空間複雜度</p>
<p>如果有 N 個人，需要一條 N 格的陣列， O(N) 。</p>

</div></div><div class="a" id="8"><div class="h">
<p class="b">Disjoint Sets 資料結構 : <br> Forest</p>
</div><div class="c">
<p class="t">Disjoint-sets Forest</p>
<p>其原理正是圖論的「有向森林」。</p>
<img src="./Set_files/DisjointSets6.png">
<p>讓一條 int 陣列的第 x 格代表第 x 人 ── 不過，格子裡改成填上 x 的老大是誰：</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">p</span><span>[</span><span class="value">10</span><span>];&nbsp;&nbsp;</span><span class="comment">//&nbsp;記錄每個人的老大</span></li><li><span class="word">p</span><span>[</span><span class="value">0</span><span>]&nbsp;=&nbsp;</span><span class="value">1</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第0人的老大是第1人</span></li><li><span class="word">p</span><span>[</span><span class="value">1</span><span>]&nbsp;=&nbsp;</span><span class="value">1</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第1人的老大是第1人</span></li><li><span class="word">p</span><span>[</span><span class="value">2</span><span>]&nbsp;=&nbsp;</span><span class="value">8</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第2人在老大是第8人</span></li><li><span>…&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span class="word">p</span><span>[</span><span class="value">9</span><span>]&nbsp;=&nbsp;</span><span class="value">2</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;第9人在老大是第2人</span></li></ol></div>
<p>彷彿是老鼠會，以萬流歸宗的方式，來代表這個人是團體的大頭目。團體的所有成員，他們往上追溯之後，都是同一個頭目。一個團體中，只會有一個頭目，由他來支配團體、作為團體的代表。</p>
<p>各位可能會有一個疑問：一個團體之中，每個人都有一個頭目，那麼頭目的老大是誰呢？可以姑且設定成自己。</p>
<p>一個團體就像是一棵分支很複雜的有根樹。這些團體構成了一叢森林，故名 Disjoint-sets Forest 。</p>
<p class="t">初始化</p>
<img src="./Set_files/DisjointSets7.png">
<p>一開始大家還沒開始分團的時候，可以想成是：每個人都不同團，每個人都是自己一人一團，自己當頭目。將第 x 格的值設成 x ，這樣每個人都是不同團體的頭目了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">p</span><span>[</span><span class="value">10</span><span>];</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">initialize</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">x</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">x</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">x</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Find:  找出一個人在哪一團？</p>
<img src="./Set_files/DisjointSets8.png">
<p>接下來談談頭目吧。頭目在一個團體之中扮演舉足輕重的角色，一個團體只會有一個頭目，所以可以用頭目作為一個團體的代表。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">find</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;當&nbsp;x&nbsp;不是頭目，就繼續追本溯源，直到找到頭目。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">while</span><span>&nbsp;(</span><span class="word">x</span><span>&nbsp;!=&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">x</span><span>;</span></li><li><span>}</span></li></ol></div>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">find</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;?&nbsp;</span><span class="word">x</span><span>&nbsp;:&nbsp;</span><span class="word">find</span><span>(</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]);</span></li><li><span>}</span></li></ol></div>
<p>find 的時候，可以把途中遇到的所有人，將其老大重設為頭目。如此一來下次 find 的時候就會變快了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">find</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;?&nbsp;</span><span class="word">x</span><span>&nbsp;:&nbsp;(</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]));</span></li><li><span>}</span></li></ol></div>
<p class="t">Equivalent Relation:  兩個人是否同團？</p>
<p>同一個團體中的成員，他們的頭目都是同一個人。要看兩個人是不是同一團，看看他們的頭目是不是同一人就行了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">equivalence</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>)&nbsp;==&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);</span></li><li><span>}</span></li></ol></div>
<p class="t">Union:  兩個人想合併自己所屬團體</p>
<img src="./Set_files/DisjointSets9.png">
<p>合併 x y 兩個團體，重新選出一個頭目。最簡單的方式是：讓 x 的頭目帶著他旗下所有小弟，投靠 y 團體的隨便一個人，如此一來兩個團體就擁有共同的頭目了，也依然保持著老鼠會的架構。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>);&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;先找出x的頭目</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;x的頭目帶領旗下小弟投靠y</span></li><li><span>}</span></li></ol></div>
<p>union 的時候，直接投靠對方的頭目，可以讓樹的深度增加最少。如此一來下次 find 的時候就會變快了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>);&nbsp;</span><span class="word">y</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;先找出頭目</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;x的頭目帶領旗下小弟投靠y的頭目</span></li><li><span>}</span></li></ol></div>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">find</span><span>(</span><span class="word">x</span><span>)]&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);</span></li><li><span>}</span></li></ol></div>
<p>實作小叮嚀： union 要確保投靠的人是頭目，投靠後頭目只有一個。另外也要避免同團體的人互相設定彼此是頭目，否則 find 會無限循環。另外 union 在 C/C++ 當中是關鍵字，必須換個字眼。</p>
<p class="t">Number of Sets:  全部總共幾個團體？</p>
<p>兩團合併成一團後，團體數就會減少一團。只需修改一下 union 的程式碼。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">groups</span><span>&nbsp;=&nbsp;</span><span class="value">10</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;團體數</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>);&nbsp;</span><span class="word">y</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="word">y</span><span>)&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">groups</span><span>--;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;兩團合併成一團後，團體數就會減少一團。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Cardinality of a Set:  一個團體總共幾個人？</p>
<p>先前提到頭目可以支配、代表一個團體，所以把焦點放在頭目上吧。另外建立一個陣列去記錄每個頭目帶領的人數， size[ 頭目 ] =  頭目帶領的人數。</p>
<p>兩團合併成一團後，團體人數就會改變。新頭目吸收人數；舊頭目則不再是頭目，毋須理會他帶領的人數。只需修改一下 union 的程式碼。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">size</span><span>[</span><span class="value">10</span><span>];&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;每個頭目帶領的人數</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">initialize</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">i</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;每團只有一個人，頭目是自己</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="value">1</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;每個頭目都只帶領一個人，那個人是自己。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>);&nbsp;</span><span class="word">y</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="word">y</span><span>)&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">groups</span><span>--;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">y</span><span>]&nbsp;+=&nbsp;</span><span class="word">size</span><span>[</span><span class="word">x</span><span>];&nbsp;</span><span class="comment">//&nbsp;新頭目吸收人數</span></li><li><span class="comment">//&nbsp;&nbsp;size[x]&nbsp;=&nbsp;0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;舊頭目不再帶領人</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">cardinality</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">size</span><span>[</span><span class="word">find</span><span>(</span><span class="word">x</span><span>)];</span></li><li><span>}</span></li></ol></div>
<p class="t">根據團體的人數多寡來做 union</p>
<p>union 的時候，讓小的團體併入大的團體，可以讓樹的深度增加最少。如此一來下次 find 的時候就會變快了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>);&nbsp;</span><span class="word">y</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="word">y</span><span>)&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">groups</span><span>--;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">size</span><span>[</span><span class="word">x</span><span>]&nbsp;&lt;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">y</span><span>])&nbsp;&nbsp;</span><span class="comment">//&nbsp;x團體﻿人單勢孤，y團體人多勢眾。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;x的頭目帶領旗下小弟投靠y的頭目</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">y</span><span>]&nbsp;+=&nbsp;</span><span class="word">size</span><span>[</span><span class="word">x</span><span>];&nbsp;</span><span class="comment">//&nbsp;y的頭目增加人數</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;形勢顛倒</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">y</span><span>]&nbsp;=&nbsp;</span><span class="word">x</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">size</span><span>[</span><span class="word">x</span><span>]&nbsp;+=&nbsp;</span><span class="word">size</span><span>[</span><span class="word">y</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li></ol></div>
<p class="t">Singleton Set:  團體是否合併過？</p>
<p>自己一個人一組，沒有 union 過。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">singleton</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">size</span><span>[</span><span class="word">find</span><span>(</span><span class="word">x</span><span>)]&nbsp;==&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Empty Set:  空集合</p>
<p>之前我們都未處理空集合。現在我們要改良資料結構，讓它可以處理空集合，而效率仍然保持一樣。</p>
<p>將陣列的第 0 格當作是一個空集合，不代表任何人。總人數如果有 100 人，那麼就要建立 101 格的陣列。第 0 格是空集合，第 1 格到第 100 格，分別代表著 100 個人。</p>
<p>現在既然有了空集合，便可將頭目的老大設定為空集合，更具義理。也就是說，初始化時要將陣列的初始值都改成 0 。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">p</span><span>[</span><span class="value">10</span><span>+</span><span class="value">1</span><span>];</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">initialize</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">x</span><span>&lt;</span><span class="value">10</span><span>+</span><span class="value">1</span><span>;&nbsp;</span><span class="word">x</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>}</span></li></ol></div>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">empty</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>}</span></li></ol></div>
<p>多了空集合，就要另外考慮空集合做聯集時的影響。不管什麼集合，只要和空集合作聯集，集合都不會改變。凡是遇到空集合，就不必做聯集了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="keyword">union</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">y</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">x</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">x</span><span>);&nbsp;</span><span class="word">y</span><span>&nbsp;=&nbsp;</span><span class="word">find</span><span>(</span><span class="word">y</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="word">y</span><span>&nbsp;||&nbsp;</span><span class="word">x</span><span>&nbsp;==&nbsp;</span><span class="value">0</span><span>&nbsp;||&nbsp;</span><span class="word">y</span><span>&nbsp;==&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="keyword">return</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">p</span><span>[</span><span class="word">x</span><span>]&nbsp;=&nbsp;</span><span class="word">y</span><span>;</span></li><li><span>}</span></li></ol></div>
<p>其他部分大致不變，不再贅述。</p>
<p class="t">時間複雜度</p>
<p>union 、 find 、 equivalence 、 cardinality 、 singleton 皆為 O(logN) 。值得一提的是，均攤時間皆是 O(α(N)) ，其中 α(N) 是 Ackermann function f(N,N) 的反函數。</p>
<p class="t">空間複雜度</p>
<p>如果有 N 個人，就需要一條 N 格的陣列，為 O(N) 。</p>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/7/793.html">793</a> <a href="http://uva.onlinejudge.org/external/8/879.html">879</a> <a href="http://uva.onlinejudge.org/external/101/10158.html">10158</a> <a href="http://uva.onlinejudge.org/external/105/10505.html">10505</a> <a href="http://uva.onlinejudge.org/external/105/10583.html">10583</a> <a href="http://uva.onlinejudge.org/external/106/10608.html">10608</a> <a href="http://uva.onlinejudge.org/external/106/10685.html">10685</a> <a href="http://uva.onlinejudge.org/external/119/11987.html">11987</a> ICPC <a href="http://icpcarchive.ecs.baylor.edu/external/43/4359.pdf">4359</a></p>
</div></div><script src="./Set_files/h.js.下载"></script><div class="m"><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/index.html">◀ Index</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#1">Set</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#2">Set資料結構:<br>循序儲存</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#3">Set資料結構:<br>索引儲存</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#4">Set資料結構:<br>Hash Table</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#5">Disjoint Sets</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#6">Disjoint Sets資料結構:<br>List</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#7">Disjoint Sets資料結構:<br>Array</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/Set.html#8">Disjoint Sets資料結構:<br>Forest</a></div></div></body></html>