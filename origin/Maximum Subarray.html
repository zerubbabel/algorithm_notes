
<!-- saved from url=(0056)http://www.csie.ntnu.edu.tw/~u91029/MaximumSubarray.html -->
<html lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" href="./Maximum Subarray_files/style.css">
<title>演算法筆記 - Maximum Subarray</title></head><body>
<div class="a" id="1"><div class="h">
<p class="b">Largest Empty Interval</p>
</div><div class="c">
<p class="t">Largest Empty Interval</p>
<img src="./Maximum Subarray_files/LargestEmptyInterval1.png">
<p>一條陣列，有些格子已被放上障礙物。最長的、連續的空白格子在哪裡？</p>
<p class="t">Recurrence</p>
<pre>length(i) =
 { 0                 , if i &lt; 0                    [Exterior]
 { 0                 , if i = 0 and array[i] = 0   [Initial]
 { 1                 , if i = 0 and array[i] = 1   [Initial]
 { 0                 , if i &gt; 0 and array[i] = 0   [Compute]
 { length(i-1) + 1   , if i &gt; 0 and array[i] = 1   [Compute]

length(i)：以第i格作為最右端的連續空白的長度。
array[i]：障礙物為0，空白為1。
</pre>
<img src="./Maximum Subarray_files/LargestEmptyInterval2.png">
<p>時間複雜度為 O(N) ，空間複雜度為 O(N) ， N 為陣列長度。</p>
<p>如果只想計算一個特定問題的答案，那麼空間複雜度可以精簡成 O(1) 。</p>
<p class="t">程式碼：求出最長空白的長度</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>]&nbsp;=</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">0</span><span>,</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span></li><li><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">length</span><span>[</span><span class="value">10</span><span>];</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">largest_empty_interval</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;initial</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="value">0</span><span>]&nbsp;==&nbsp;</span><span class="value">0</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="value">0</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="value">0</span><span>]&nbsp;=&nbsp;</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;compute</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="value">0</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;輸出結果</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">max_length</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;&gt;&nbsp;</span><span class="word">max_length</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">max_length</span><span>&nbsp;=&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"最長空白的長度是"</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">max_length</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">程式碼：求出最長空白的長度</p>
<p>為了讓程式碼更清爽，這裡把 array[] 、 length[] 裡面的數值都往右移動一格，如此就可以省略掉第零格的判斷式，也避免了 length[] 會溢出邊界。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>]&nbsp;=</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">0</span><span>,</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">0</span><span>,</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span></li><li><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">length</span><span>[</span><span class="value">10</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>];</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">largest_empty_interval</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;initial</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="value">0</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;compute</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="value">0</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;輸出結果</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;......</span></li><li><span>}</span></li></ol></div>
<p>為了讓程式碼更清爽，這裡也把 length[] 都初始化為 0 ，如此就不必特別處理 array[i] == 0 的情況了，相當巧妙。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>]&nbsp;=</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">0</span><span>,</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">0</span><span>,</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="value">1</span></li><li><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">length</span><span>[</span><span class="value">10</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>];</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">largest_empty_interval</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;initial</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">memset</span><span>(</span><span class="word">length</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="keyword">sizeof</span><span>(</span><span class="word">length</span><span>));</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;compute</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="value">1</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;輸出結果</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;......</span></li><li><span>}</span></li></ol></div>
<p>這兩個技巧是經常使用的的實作技巧，不僅簡化了程式碼的結構，也增加了程式的效率。一定要學會！</p>
<p class="t">程式碼：求出最長空白的位置</p>
<p>求出最長空白的長度之後，在最後加上一段程式碼就可以了。當然可以再改進，就交給各位了。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">largest_empty_interval</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;......</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;求出所有最長空白的位置</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;從1開始</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="word">max_length</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;記得減回1</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"有一個最長空白的位置是"</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;</span><span class="string">"從"</span><span>&nbsp;&lt;&lt;&nbsp;(</span><span class="word">i</span><span>&nbsp;-&nbsp;</span><span class="word">max_length</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>)&nbsp;-&nbsp;</span><span class="value">1</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;</span><span class="string">"到"</span><span>&nbsp;&lt;&lt;&nbsp;(</span><span class="word">i</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>}</span></li></ol></div>
<p class="t">程式碼：求出其中一個最長空白的位置</p>
<p>也有人會一邊計算表格，一邊記錄最大值。這種寫法也是很好的，不過只能求出其中一個最長空白的位置。</p>
<p>如果只需要求出隨便一種最長空白的位置，那麼這種寫法就非常適合。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">largest_empty_interval</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;initial</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">memset</span><span>(</span><span class="word">length</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="keyword">sizeof</span><span>(</span><span class="word">length</span><span>));</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;compute</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">max_length</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">index</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;</span><span class="word">i</span><span>++)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>]&nbsp;==&nbsp;</span><span class="value">1</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">length</span><span>[</span><span class="word">i</span><span>]&nbsp;&gt;&nbsp;</span><span class="word">max_length</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">max_length</span><span>&nbsp;=&nbsp;</span><span class="word">length</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">index</span><span>&nbsp;=&nbsp;</span><span class="word">i</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;輸出結果</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"最長空白的長度是"</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">max_length</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"有一個最長空白的位置是"</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;</span><span class="string">"從"</span><span>&nbsp;&lt;&lt;&nbsp;(</span><span class="word">index</span><span>&nbsp;-&nbsp;</span><span class="word">max_length</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>)&nbsp;-&nbsp;</span><span class="value">1</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;&nbsp;</span><span class="string">"到"</span><span>&nbsp;&lt;&lt;&nbsp;(</span><span class="word">index</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;-&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>}</span></li></ol></div>

</div></div><div class="a" id="2"><div class="h">
<p class="b">Largest Empty Rectangle</p>
</div><div class="c">
<p class="t">Largest Empty Rectangle</p>
<img src="./Maximum Subarray_files/LargestEmptyRectangle1.png">
<p>一張方格紙，許多格子填入黑色。請找出不包含黑格子的矩形，令矩形面積盡量大。</p>
<p>矩形的頂點，是一整個格子，而不是直線與橫線的交叉點。</p>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/100/10074.html">10074</a> <a href="http://uva.onlinejudge.org/external/105/10502.html">10502</a> <a href="http://uva.onlinejudge.org/external/106/10667.html">10667</a></p>
<p class="t">直覺的演算法：窮舉法</p>
<p>矩形總共四個頂點，窮舉所有可能的頂點位置。紙的長寬為 H 和 W 的話，總共 HW 個位置可以放上頂點。窮舉所有矩形，時間複雜度是 O((HW)⁴) 。另外還得確認矩形不含黑格子，就是 O((HW)⁵) 。</p>
<p>想要確定一個矩形的大小和位置，其實只要兩個對角頂點就夠了；窮舉所有矩形，時間複雜度是 O((HW)²) 。確認矩形不含黑格子，就是 O((HW)³) 。</p>
<p>想要確定一個矩形的大小和位置，也可以利用左上角的頂點、長、寬；窮舉所有矩形，時間複雜度是 O((HW)²) 。確認矩形不含黑格子，就是 O((HW)³) 。</p>
<p>預先計算二維前綴和，就能迅速計算二維區間和，時間複雜度是 O(HW) 。窮舉所有矩形，同時確認矩形不含黑格子：判斷矩形面積與區間和是否相等，就是 O((HW)²) 。</p>
<p class="t">簡單的演算法</p>
<p>接著試試 Dynamic Programming 吧！</p>
<p>原來的紙張又大又複雜，計算面積非常麻煩。我們試著將紙張切成小塊，逐一處理。這裡將紙張切成橫條。</p>
<img src="./Maximum Subarray_files/LargestEmptyRectangle2.png">
<p>窮舉紙張上的每個位置（窮舉矩形右下角頂點），觀察以上每個橫條（窮舉矩形高度），往左可延伸的長度（預先用 Largest Empty Interval 得到矩形寬度），持續記錄最大矩形面積。</p>
<img src="./Maximum Subarray_files/LargestEmptyRectangle3.png">
<p>時間複雜度分析：一、每個橫條計算 Largest Empty Interval 。二、窮舉矩形右下角頂點，窮舉矩形高度，計算矩形面積。時間複雜度是 O((HW) ⋅ H) 。</p>
<p>空間複雜度分析：儲存全部問題的答案，空間複雜度是 O(HW) 。只想計算一個特定問題的答案，空間複雜度仍是 O(HW) 。</p>
<p>可以改為切直條。可以改為窮舉矩形右上角頂點。道理都一樣。</p>
<p class="t">程式碼</p>
<p>為了不超出邊界、導致溢位，於是在紙張外面多圍一圈。這是實作二維地圖的常見手法。</p>
<img src="./Maximum Subarray_files/LargestEmptyRectangle4.png">
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>][</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];&nbsp;</span><span class="comment">//&nbsp;空敞處為true，有障礙物則為false</span></li></ol></div>
<p>然後是一個橫條的 Largest Empty Interval 。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">width</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];</span></li><li><span class="comment">//&nbsp;一個橫條上，每個位置往左可延伸的長度</span></li><li><span class="comment">//&nbsp;如width[2]就是第二個位置往左可延伸的長度</span></li><li><span class="comment">//&nbsp;初始化為零</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">only_one_bar</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;計算每個點往左可延伸的長度</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">position</span><span>&nbsp;</span><span class="word">j</span><span>&nbsp;</span><span class="word">have</span><span>&nbsp;</span><span class="word">blockade</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;有障礙物，長度為0。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">width</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;沒障礙物，長度增加。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">width</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">width</span><span>[</span><span class="word">j</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>}</span></li></ol></div>
<p>補足程式碼，計算所有橫條。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>][</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">width</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>][</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">all_bars</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;計算每個橫條</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>}</span></li></ol></div>
<p>計算 Largest Empty Rectangle 。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>][</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">width</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>][</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">largest_empty_rectangle</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">/*&nbsp;計算所有橫條當中，每個位置往左可延伸的長度。&nbsp;*/</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comments">/*&nbsp;計算每個位置當作矩形右下角頂點時的最大矩形面積。&nbsp;*/</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;最大矩形面積，初始化為最小值</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">area</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;窮舉矩形右下角頂點的位置</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">w</span><span>&nbsp;=&nbsp;</span><span class="value">1e9</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">h</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>-</span><span class="word">h</span><span>+</span><span class="value">1</span><span>&nbsp;&gt;=&nbsp;</span><span class="value">0</span><span>;&nbsp;++</span><span class="word">h</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">width</span><span>[</span><span class="word">i</span><span>-</span><span class="word">h</span><span>+</span><span class="value">1</span><span>][</span><span class="word">j</span><span>]&nbsp;==&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="keyword">break</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">w</span><span>&nbsp;=&nbsp;</span><span class="word">min</span><span>(</span><span class="word">w</span><span>,&nbsp;</span><span class="word">width</span><span>[</span><span class="word">i</span><span>-</span><span class="word">h</span><span>+</span><span class="value">1</span><span>][</span><span class="word">j</span><span>]);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">area</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">area</span><span>,&nbsp;</span><span class="word">w</span><span>*</span><span class="word">h</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">area</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">更好的演算法</p>
<p>窮舉紙張每一個位置（下邊界），先往上延伸到底（上邊界），再往左右延伸到底（左右邊界），計算面積。</p>
<img src="./Maximum Subarray_files/LargestEmptyRectangle5.png">
<p>紙張依舊切成橫條。建立由上到下（上邊界）、由左到右（左邊界）、由右到左（右邊界），一共三種 Largest Empty Interval ，以此為基礎來計算面積。</p>
<img src="./Maximum Subarray_files/LargestEmptyRectangle6.png">
<p>時間複雜度是 O(HW) 。</p>
<div class="sh"><div class="bar">只算面積、沒找位置</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>][</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">wl</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;每一條橫條往左可延伸的長度</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">wr</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;每一條橫條往右可延伸的長度</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">h</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;矩形往上可延伸的高度</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">l</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;矩形往上延伸到底後，往左可延伸的距離。</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">r</span><span>[</span><span class="value">10</span><span>+</span><span class="value">2</span><span>];&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;矩形往上延伸到底後，往右可延伸的距離。</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">largest_empty_rectangle</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;最大矩形面積，初始化為最小值</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">max_area</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;以每一個橫條當作長方形底部</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;往左可延伸的長度</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">wl</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">wl</span><span>[</span><span class="word">j</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">wl</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;往右可延伸的長度</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">10</span><span>;&nbsp;</span><span class="word">j</span><span>&gt;=</span><span class="value">1</span><span>;&nbsp;--</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">wr</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">wr</span><span>[</span><span class="word">j</span><span>+</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">wr</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;矩形往上可延伸的高度</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">h</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">h</span><span>[</span><span class="word">j</span><span>]&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">h</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;矩形往上延伸到底，往左可延伸的距離。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">l</span><span>[</span><span class="word">j</span><span>]&nbsp;==&nbsp;</span><span class="value">0</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">l</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">wl</span><span>[</span><span class="word">j</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">l</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">min</span><span>(</span><span class="word">wl</span><span>[</span><span class="word">j</span><span>],&nbsp;</span><span class="word">l</span><span>[</span><span class="word">j</span><span>]);</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;矩形往上延伸到底後，往右可延伸的距離。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">r</span><span>[</span><span class="word">j</span><span>]&nbsp;==&nbsp;</span><span class="value">0</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">r</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">wr</span><span>[</span><span class="word">j</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">r</span><span>[</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">min</span><span>(</span><span class="word">wr</span><span>[</span><span class="word">j</span><span>],&nbsp;</span><span class="word">r</span><span>[</span><span class="word">j</span><span>]);</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;記錄&nbsp;Largest&nbsp;Empty&nbsp;Rectangle</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">max_area</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">max_area</span><span>,&nbsp;(</span><span class="word">l</span><span>[</span><span class="word">j</span><span>]&nbsp;+&nbsp;</span><span class="word">r</span><span>[</span><span class="word">j</span><span>]&nbsp;-&nbsp;</span><span class="value">1</span><span>)&nbsp;*&nbsp;</span><span class="word">h</span><span>[</span><span class="word">j</span><span>]);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">max_area</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">最好的演算法</p>
<p>利用一個 stack ，宛如判斷括號對稱，找出矩形的左右邊界。</p>
<p>時間複雜度是 O(HW) 。</p>
<pre>0-1.
以此為例。

   0000000000000000
   0000011111000001
   0011111111100001
   0111111111110001
   1111111111110011
   1111111111111111
   0000000000000000

0-2.
計算每個直條的Largest Empty Interval。

   0000000000000000
   0000011111000001
   0011122222100002
   0122233333210003
   1233344444320014
   2344455555431125
   0000000000000000

0-3.
引入堆疊。堆疊「從下到上」必須是遞增的。
為了方便起見，從倒數第二個橫條開始執行。

   0000000000000000                  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   1233344444320014   |             |
-&gt; 2344455555431125   |             |
   0000000000000000   +-------------+

1.
首先遇到「高度2」。「高度2」放入堆疊。

   0000000000000000                  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   ^233344444320014   |             |
   ^344455555431125   | 高度2 位置1 |
   0000000000000000   +-------------+
                   
2.
遇到「高度3」。「高度3」&gt;「高度2」，「高度3」放入堆疊。

   0000000000000000                  
   0000011111000001   |             |
   0011122222100002   |             |
   0^22233333210003   |             |
   1^33344444320014   | 高度3 位置2 |
   2^44455555431125   | 高度2 位置1 |
   0000000000000000   +-------------+

3.
   0000000000000000                  
   0000011111000001   |             |
   00^1122222100002   |             |
   01^2233333210003   | 高度4 位置3 |
   12^3344444320014   | 高度3 位置2 |
   23^4455555431125   | 高度2 位置1 |
   0000000000000000   +-------------+

4.
   0000000000000000                  
   0000011111000001   |             |
   001^122222100002   |             |
   012^233333210003   | 高度4 位置3 |
   123^344444320014   | 高度3 位置2 |
   234^455555431125   | 高度2 位置1 |
   0000000000000000   +-------------+

5.
   0000000000000000                  
   0000011111000001   |             |
   0011^22222100002   |             |
   0122^33333210003   | 高度4 位置3 |
   1233^44444320014   | 高度3 位置2 |
   2344^55555431125   | 高度2 位置1 |
   0000000000000000   +-------------+

6.
   0000000000000000                  
   00000^1111000001   |             |
   00111^2222100002   | 高度5 位置6 |
   01222^3333210003   | 高度4 位置3 |
   12333^4444320014   | 高度3 位置2 |
   23444^5555431125   | 高度2 位置1 |
   0000000000000000   +-------------+

7.
   0000000000000000                  
   000001^111000001   |             |
   001112^222100002   | 高度5 位置6 |
   012223^333210003   | 高度4 位置3 |
   123334^444320014   | 高度3 位置2 |
   234445^555431125   | 高度2 位置1 |
   0000000000000000   +-------------+

8.
   0000000000000000                  
   0000011^11000001   |             |
   0011122^22100002   | 高度5 位置6 |
   0122233^33210003   | 高度4 位置3 |
   1233344^44320014   | 高度3 位置2 |
   2344455^55431125   | 高度2 位置1 |
   0000000000000000   +-------------+

9.
   0000000000000000                  
   00000111^1000001   |             |
   00111222^2100002   | 高度5 位置6 |
   01222333^3210003   | 高度4 位置3 |
   12333444^4320014   | 高度3 位置2 |
   23444555^5431125   | 高度2 位置1 |
   0000000000000000   +-------------+

10.
   0000000000000000                  
   000001111^000001   |             |
   001112222^100002   | 高度5 位置6 |
   012223333^210003   | 高度4 位置3 |
   123334444^320014   | 高度3 位置2 |
   234445555^431125   | 高度2 位置1 |
   0000000000000000   +-------------+

11.
遇到「高度4」。比堆疊頂端的「高度5」還小。
換句話說，高度5的矩形，已經到了盡頭、到了右邊界。
彈出「高度5」，計算面積吧！
面積 = 高度5 × (位置11 - 位置6) = 25

   0000000000000000     高度5 位置6  
   00000#####000001   |             |
   00111#####^00002   |             |
   01222#####^10003   | 高度4 位置3 |
   12333#####^20014   | 高度3 位置2 |
   23444#####^31125   | 高度2 位置1 |
   0000000000000000   +-------------+

12.
遇到「高度3」。比堆疊頂端還小！彈出！
面積 = 高度4 × (位置12 - 位置3) = 36

   0000000000000000     高度4 位置3  
   0000011111000001   |             |
   00#########00002   |             |
   01#########^0003   |             |
   12#########^0014   | 高度3 位置2 |
   23#########^1125   | 高度2 位置1 |
   0000000000000000   +-------------+

13-1.
面積 = 高度3 × (位置13 - 位置2) = 33

   0000000000000000     高度3 位置2  
   0000011111000001   |             |
   0011122222100002   |             |
   0###########0003   |             |
   1###########0014   |             |
   2###########^125   | 高度2 位置1 |
   0000000000000000   +-------------+

13-2.
面積 = 高度2 × (位置13 - 位置1) = 24

   0000000000000000     高度2 位置1  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   ############0014   |             |
   ############^125   |             |
   0000000000000000   +-------------+

13-3.
「高度1」放入堆疊。可以想成：「高度1」比目前堆疊頂端還大。
注意到，「位置1」沿用上一個彈出的位置。

   0000000000000000                  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   1233344444320014   |             |
   234445555543^125   | 高度1 位置1 |
   0000000000000000   +-------------+

14.
   0000000000000000                  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   1233344444320014   |             |
   2344455555431^25   | 高度1 位置1 |
   0000000000000000   +-------------+

15.
   0000000000000000                  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   12333444443200^4   | 高度2 位置15|
   23444555554311^5   | 高度1 位置1 |
   0000000000000000   +-------------+

16.
   0000000000000000                  
   000001111100000^   |             |
   001112222210000^   |             |
   012223333321000^   | 高度5 位置16|
   123334444432001^   | 高度2 位置15|
   234445555543112^   | 高度1 位置1 |
   0000000000000000   +-------------+

17-1.
最後記得處理堆疊剩下的元素。
面積 = 高度5 × (位置17 - 位置16) = 5

   0000000000000000     高度5 位置16 
   000001111100000#   |             |
   001112222210000#   |             |
   012223333321000#   |             |
   123334444432001#   | 高度2 位置15|
   134445555543112#   | 高度1 位置1 |
   0000000000000000   +-------------+

17-2.
面積 = 高度2 × (位置17 - 位置15) = 4

   0000000000000000     高度2 位置15 
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   12333444443200##   |             |
   13444555554311##   | 高度1 位置1 |
   0000000000000000   +-------------+

17-3.
面積 = 高度1 × (位置17 - 位置1) = 16

   0000000000000000     高度1 位置1  
   0000011111000001   |             |
   0011122222100002   |             |
   0122233333210003   |             |
   1233344444320014   |             |
   ################   |             |
   0000000000000000   +-------------+
</pre>

</div></div><div class="a" id="3"><div class="h">
<p class="b">Largest Empty Square</p>
</div><div class="c">
<p class="t">Largest Empty Square</p>
<img src="./Maximum Subarray_files/LargestEmptySquare1.png">
<pre>area(i, j) = min( area(i-1, j), area(i-1, j-1), area(i, j-1) ) + 1
</pre>
<img src="./Maximum Subarray_files/LargestEmptySquare2.png">
<p>窮舉紙張上的每個位置，做為正方形右下角，計算正方形面積：看看正方形的右上角、左上角、左下角最遠到哪裡。</p>
<p>時間複雜度為 O(HW) ，空間複雜度為 O(min(H, W)) 。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">bool</span><span>&nbsp;</span><span class="word">array</span><span>[</span><span class="value">10</span><span>+</span><span class="value">1</span><span>][</span><span class="value">10</span><span>+</span><span class="value">1</span><span>];&nbsp;</span><span class="comment">//&nbsp;空敞處為true，有障礙物則為false。</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">area</span><span>[</span><span class="value">10</span><span>+</span><span class="value">1</span><span>][</span><span class="value">10</span><span>+</span><span class="value">1</span><span>];&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;初始化為零</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">largest_empty_square</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="value">1</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;=</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">array</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>])</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">area</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>]&nbsp;=&nbsp;</span><span class="word">min</span><span>(</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">area</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>][</span><span class="word">j</span><span>],</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">area</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>-</span><span class="value">1</span><span>],</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">area</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>][</span><span class="word">j</span><span>-</span><span class="value">1</span><span>]</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;+&nbsp;</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">area</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>]&nbsp;&gt;&nbsp;</span><span class="word">a</span><span>)&nbsp;</span><span class="comment">//&nbsp;記錄最大值</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">a</span><span>&nbsp;=&nbsp;</span><span class="word">area</span><span>[</span><span class="word">i</span><span>][</span><span class="word">j</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">a</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/109/10908.html">10908</a></p>

</div></div><div class="a" id="4"><div class="h">
<p class="b">Maximum Sum Subarray</p>
</div><div class="c">
<p class="t">Maximum Sum Subarray</p>
<img src="./Maximum Subarray_files/MaximumSumSubarray1.png">
<pre>2 -7  4 -3  6  4 -4  1 -5 0
      \______  ______/
             \/
             8
</pre>
<p>總和最大的區間。從數列當中取出一連串數字，求總和；找出最大的總和。最糟糕的情況，就是不取任何數字，總和為零。</p>
<p>可能不只一種。</p>
<p>窮舉法。窮舉區間起點、區間終點，計算總和。時間複雜度是 O(N³) 。</p>
<p>貪心法。累計總和，遇到負數就捨棄。時間複雜度是 O(N) 。</p>
<div class="sh"><div class="bar">計算Maximum Sum Subarray之元素總和（可以不必取數字）</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">10</span><span>]&nbsp;=&nbsp;{</span><span class="value">1</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">6</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;-</span><span class="value">2</span><span>,&nbsp;</span><span class="value">4</span><span>,&nbsp;-</span><span class="value">1</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">4</span><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">maximum_sum_subarray</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">max_sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">sum</span><span>&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;累計總和</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&lt;&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;零總比負數好</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;隨時記錄最大值</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&gt;&nbsp;</span><span class="word">max_sum</span><span>)&nbsp;</span><span class="word">max_sum</span><span>&nbsp;=&nbsp;</span><span class="word">sum</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">max_sum</span><span>;</span></li><li><span>}</span></li></ol></div>
<div class="sh"><div class="bar">計算Maximum Sum Subarray之元素總和（至少取一個數字）</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">10</span><span>]&nbsp;=&nbsp;{</span><span class="value">1</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">6</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;-</span><span class="value">2</span><span>,&nbsp;</span><span class="value">4</span><span>,&nbsp;-</span><span class="value">1</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">4</span><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">maximum_sum_subarray</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">max_sum</span><span>&nbsp;=&nbsp;-</span><span class="value">1e9</span><span>,&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;先前累積的不是負數，加了就更大。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&gt;&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="word">sum</span><span>&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;先前累積的若是負數，寧可不加。</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span><span>&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;隨時記錄最大值</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&gt;&nbsp;</span><span class="word">max_sum</span><span>)&nbsp;</span><span class="word">max_sum</span><span>&nbsp;=&nbsp;</span><span class="word">sum</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">max_sum</span><span>;</span></li><li><span>}</span></li></ol></div>
<div class="sh"><div class="bar">找出其中一個Maximum Sum Subarray的位置（最左邊的）</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">10</span><span>]&nbsp;=&nbsp;{</span><span class="value">1</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">6</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;-</span><span class="value">2</span><span>,&nbsp;</span><span class="value">4</span><span>,&nbsp;-</span><span class="value">1</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">4</span><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">maximum_sum_subarray</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">max_sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">start</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="word">end</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="word">temp_start</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">sum</span><span>&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&lt;&nbsp;</span><span class="value">0</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">temp_start</span><span>&nbsp;=&nbsp;</span><span class="word">i</span><span>+</span><span class="value">1</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;重新設定起點是下一個數字</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&gt;&nbsp;</span><span class="word">max_sum</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">max_sum</span><span>&nbsp;=&nbsp;</span><span class="word">sum</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">start</span><span>&nbsp;=&nbsp;</span><span class="word">temp_start</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">end</span><span>&nbsp;=&nbsp;</span><span class="word">i</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">start</span><span>&nbsp;&gt;&nbsp;</span><span class="word">end</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"什麼數字都不取"</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"從"</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">start</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="string">"到"</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">end</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">max_sum</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/5/507.html">507</a> <a href="http://uva.onlinejudge.org/external/106/10684.html">10684</a></p>
<p class="t">Maximum Sum Submatrix</p>
<p>這個問題還可推廣到 2D 、 3D ，時間複雜度分別是 O(N³) 、 O(N⁵) 。原理是面與面合併，條與條合併，元素與元素合併。以下直接提供 3D 的情形。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">const</span><span>&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">A</span><span>&nbsp;=&nbsp;</span><span class="value">20</span><span>,&nbsp;</span><span class="word">B</span><span>&nbsp;=&nbsp;</span><span class="value">20</span><span>,&nbsp;</span><span class="word">C</span><span>&nbsp;=&nbsp;</span><span class="value">20</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;三個維度的個別寬度</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">max1D</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;-</span><span class="value">1e9</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">s</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="word">C</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">s</span><span>&nbsp;&gt;=&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="word">s</span><span>&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">else</span><span>&nbsp;</span><span class="word">s</span><span>&nbsp;=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">ans</span><span>,&nbsp;</span><span class="word">s</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">ans</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">max2D</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[][</span><span class="value">20</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;-</span><span class="value">1e9</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">s</span><span>[</span><span class="value">20</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="word">B</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">memset</span><span>(</span><span class="word">s</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="keyword">sizeof</span><span>(</span><span class="word">s</span><span>));</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="word">i</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;</span><span class="word">B</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">k</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">k</span><span>&lt;</span><span class="word">C</span><span>;&nbsp;++</span><span class="word">k</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">s</span><span>[</span><span class="word">k</span><span>]&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">j</span><span>][</span><span class="word">k</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">ans</span><span>,&nbsp;</span><span class="word">max1D</span><span>(</span><span class="word">s</span><span>));</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">ans</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">max3D</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[][</span><span class="value">20</span><span>][</span><span class="value">20</span><span>])</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;-</span><span class="value">1e9</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">s</span><span>[</span><span class="value">20</span><span>][</span><span class="value">20</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="word">A</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">memset</span><span>(</span><span class="word">s</span><span>,&nbsp;</span><span class="value">0</span><span>,&nbsp;</span><span class="keyword">sizeof</span><span>(</span><span class="word">s</span><span>));</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">j</span><span>=</span><span class="word">i</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;</span><span class="word">A</span><span>;&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">k</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">k</span><span>&lt;</span><span class="word">B</span><span>;&nbsp;++</span><span class="word">k</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">l</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">l</span><span>&lt;</span><span class="word">C</span><span>;&nbsp;++</span><span class="word">l</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">s</span><span>[</span><span class="word">k</span><span>][</span><span class="word">l</span><span>]&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">j</span><span>][</span><span class="word">k</span><span>][</span><span class="word">l</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">ans</span><span>,&nbsp;</span><span class="word">max2D</span><span>(</span><span class="word">s</span><span>));</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">ans</span><span>;</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">main</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">20</span><span>][</span><span class="value">20</span><span>][</span><span class="value">20</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">max3D</span><span>(</span><span class="word">a</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="e">UVa <a href="http://uva.onlinejudge.org/external/1/108.html">108</a> <a href="http://uva.onlinejudge.org/external/8/836.html">836</a> <a href="http://uva.onlinejudge.org/external/108/10827.html">10827</a> <a href="http://uva.onlinejudge.org/external/107/10755.html">10755</a></p>
<p class="t">Maximum Sum Submatrix in Sparse Matrix</p>
<p>當矩陣裡面幾乎都是零，數字很少，時間複雜度 O(K(K+N)) ， K 是數字個數， N 是較短的邊長。</p>
<p>限制子矩陣的上下邊界位置，而且已經垂直方向進行加總，此時問題退化為一維的 Maximum Sum Subarray 。</p>
<p>窮舉子矩陣上邊界。針對一種上邊界，依序窮舉下邊界，橫列漸漸增加。垂直加總數字，計算 Maximum Sum Subarray 。</p>
<p>然後改為由上到下排序數字、窮舉數字，以降低時間複雜度。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="keyword">const</span><span>&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">N</span><span>&nbsp;=&nbsp;</span><span class="value">1000</span><span>,&nbsp;</span><span class="word">K</span><span>&nbsp;=&nbsp;</span><span class="value">10</span><span>;</span></li><li><span class="keyword">struct</span><span>&nbsp;</span><span class="word">Element</span><span>&nbsp;{</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>,&nbsp;</span><span class="word">j</span><span>,&nbsp;</span><span class="word">n</span><span>;}&nbsp;</span><span class="word">a</span><span>[</span><span class="word">K</span><span>];</span></li><li>&nbsp;</li><li><span class="type">bool</span><span>&nbsp;</span><span class="keyword">operator</span><span>&lt;(</span><span class="word">Element</span><span>&amp;&nbsp;</span><span class="word">a</span><span>,&nbsp;</span><span class="word">Element</span><span>&amp;&nbsp;</span><span class="word">b</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">a</span><span>.</span><span class="word">i</span><span>&nbsp;&lt;&nbsp;</span><span class="word">b</span><span>.</span><span class="word">i</span><span>&nbsp;||&nbsp;(</span><span class="word">a</span><span>.</span><span class="word">i</span><span>&nbsp;==&nbsp;</span><span class="word">b</span><span>.</span><span class="word">i</span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="word">a</span><span>.</span><span class="word">j</span><span>&nbsp;&lt;&nbsp;</span><span class="word">b</span><span>.</span><span class="word">j</span><span>);</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">maximum_sum_submatrix</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">sort</span><span>(</span><span class="word">a</span><span>,&nbsp;</span><span class="word">a</span><span>+</span><span class="word">K</span><span>);</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="word">K</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">c</span><span>[</span><span class="word">N</span><span>]&nbsp;=&nbsp;{};</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">k</span><span>=</span><span class="word">i</span><span>;&nbsp;</span><span class="word">k</span><span>&lt;</span><span class="word">K</span><span>;&nbsp;++</span><span class="word">k</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">do</span><span>&nbsp;</span><span class="word">c</span><span>[</span><span class="word">a</span><span>[</span><span class="word">k</span><span>].</span><span class="word">j</span><span>]&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">k</span><span>].</span><span class="word">n</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">while</span><span>&nbsp;(</span><span class="word">k</span><span>&nbsp;&lt;&nbsp;</span><span class="word">K</span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="word">a</span><span>[</span><span class="word">k</span><span>+</span><span class="value">1</span><span>].</span><span class="word">i</span><span>&nbsp;==&nbsp;</span><span class="word">a</span><span>[</span><span class="word">k</span><span>].</span><span class="word">i</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="word">max</span><span>(</span><span class="word">ans</span><span>,&nbsp;</span><span class="word">maximum_sum_subarray</span><span>(</span><span class="word">c</span><span>,&nbsp;</span><span class="word">N</span><span>));</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">retrun</span><span>&nbsp;</span><span class="word">ans</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="t">Maximum Sum Subarray with Length K</p>
<p>窮舉所有可能的區間位置。時間複雜度 O(N) 。</p>
<p>網路上有人暱稱此技巧為「滑動視窗 sliding window 」。</p>
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">10</span><span>]&nbsp;=&nbsp;{</span><span class="value">1</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">6</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;-</span><span class="value">2</span><span>,&nbsp;</span><span class="value">4</span><span>,&nbsp;-</span><span class="value">1</span><span>,&nbsp;</span><span class="value">3</span><span>,&nbsp;</span><span class="value">2</span><span>,&nbsp;-</span><span class="value">4</span><span>};</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">maximum_sum_subarray</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">K</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">sum</span><span>&nbsp;=&nbsp;</span><span class="value">0</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>;&nbsp;</span><span class="word">i</span><span>&lt;</span><span class="word">K</span><span>;&nbsp;++</span><span class="word">i</span><span>)&nbsp;</span><span class="word">sum</span><span>&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="word">sum</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>=</span><span class="value">0</span><span>,&nbsp;</span><span class="word">j</span><span>=</span><span class="word">K</span><span>;&nbsp;</span><span class="word">j</span><span>&lt;</span><span class="value">10</span><span>;&nbsp;++</span><span class="word">i</span><span>,&nbsp;++</span><span class="word">j</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span class="comment">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;+=&nbsp;a[j];&nbsp;sum&nbsp;-=&nbsp;a[i];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">sum</span><span>&nbsp;+=&nbsp;</span><span class="word">a</span><span>[</span><span class="word">j</span><span>]&nbsp;-&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">sum</span><span>&nbsp;&gt;&nbsp;</span><span class="word">ans</span><span>)&nbsp;</span><span class="word">ans</span><span>&nbsp;=&nbsp;</span><span class="word">sum</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;</span><span class="word">ans</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="e">ICPC <a href="http://icpcarchive.ecs.baylor.edu/external/26/2678.pdf">2678</a> <a href="http://icpcarchive.ecs.baylor.edu/external/48/4840.pdf">4840</a></p>
<p class="t">Maximum Sum Subarray with Length [L, R]</p>
<p>窮舉法。窮舉區間起點、區間終點，求總和。時間複雜度 O(N³) 。</p>
<p>欲讓 a[i...j] 最大，即是讓前綴和 a[0...i-1] 最小。窮舉所有位置作為區間右端，至於區間左端則套用「滑動視窗最小值」的模型：</p>
<p>以 binary search tree 動態儲存 [L,R] 範圍內的所有前綴和。時間複雜度 O(NlogN) 。</p>
<p>以 deque 動態儲存 [L,R] 範圍內的前綴和，保持嚴格遞增。時間複雜度 O(N) 。</p>

</div></div><div class="a" id="5"><div class="h">
<p class="b">Maximum Average Subarray</p>
</div><div class="c">
<p class="t">Maximum Average Subarray （ Maximum Density Segment ）</p>
<img src="./Maximum Subarray_files/MaximumAverageSubarray1.png">
<p>區間總和除以區間長度，平均值最大的區間。</p>
<p>直接法。當數列沒有正數，則區間長度是 0 。當數列有正數，區間長度越小，平均值越大；區間長度是 1 ，平均值最大，位於數列最大值。時間複雜度 O(N) 。</p>
<p>計算幾何。計算前綴和 P[i] ，可快速求得區間 [i, j] 的平均值 (P[i] - P[j-1]) / (i - (j-1)) 。進一步想成：數對 (i, P[i]) 與數對 (j-1, P[j-1]) 相減後算 y/x ！</p>
<p>原問題變成：點集合 (i, P[i]) 與點集合 (-i, -P[i]) 的 Pairwise Sum 當中，求 y/x 最大者。一定位於凸包的頂點。</p>
<p>凸包有著很快的演算法。將 Pairwise Sum 拓展成 Minkowski Sum ，改以多邊形的觀點來看問題。兩個多邊形的 Minkowski Sum 的凸包，就是兩個多邊形的凸包的 Minkowski Sum 。得到簡潔的演算法：求 (i, P[i]) 的凸包，求 (-i, -P[i]) 的凸包，求 Minkowski Sum ，找到 y/x 最大的頂點。時間複雜度 O(N) 。</p>
<p class="t">Maximum Average Subarray with Length K</p>
<p>滑動視窗， O(N) 。</p>
<p class="t">Maximum Average Subarray with Length [L, R]</p>
<p>不能是空區間。總和為正數，區間越短越有利；總和為負數，區間越長越有利。</p>
<p>窮舉法。窮舉區間起點、區間終點，求平均。時間複雜度 O(N³) 。</p>
<p>試誤法。窮舉區間長度，求符合長度的 Maximum Average Subarray ，滑動視窗。時間複雜度 O(N²) 。</p>
<p>試誤法。二分搜尋平均值，總共 logR 個回合。針對一種平均值，所有數字皆減去平均值，求 Maximum Sum Subarray 。若是空區間，則平均值須更大；若非空區間，則平均值可更小。時間複雜度 O(NlogR) 。</p>
<p>計算幾何。建構二維座標系，索引值為 X 軸，前綴和為 Y 軸， (i, P[i]) 為 N 個座標點，區間即線段，區間平均值即線段斜率，平均值最大的區間即斜率最大的線段。</p>
<img src="./Maximum Subarray_files/MaximumAverageSubarray2.png">
<p>套用「<a href="http://www.csie.ntnu.edu.tw/~u91029/Point2.html"> Sweep Line </a>」，先窮舉區間右邊界，再窮舉區間左邊界。斜率最大的線段，就是右端點到左方所有點的下切線！換句話說，就是右端點到左方所有點的凸包的下切線！</p>
<img src="./Maximum Subarray_files/MaximumAverageSubarray3.png">
<p>改為套用「<a href="http://www.csie.ntnu.edu.tw/~u91029/ConvexHull.html"> Andrew's Monotone Chain </a>」，只求下凸包。建立 stack ，逐次加入一點，找到下切線，更新凸包。所有下切線當中，斜率最大者，即為答案。時間複雜度 O(N) 。</p>
<img src="./Maximum Subarray_files/MaximumAverageSubarray4.png">
<p>區間擁有寬度限制時，只求該範圍的下凸包。</p>
<p>寬度下限：額外的新下切線做為答案。</p>
<p>寬度上限：困難處在於刪除下凸包的最左側頂點，並且快速地重新包覆。解決方法是預計算：上述演算法事先從右到左掃描，求得下凸包的演變過程，反過來運作，就是刪除了。</p>
<img src="./Maximum Subarray_files/MaximumAverageSubarray5.png">
<div class="sh"><div class="bar">&nbsp;</div><ol><li><span class="type">int</span><span>&nbsp;</span><span class="word">N</span><span>,&nbsp;</span><span class="word">L</span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment">//&nbsp;R&nbsp;is&nbsp;N...</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">a</span><span>[</span><span class="value">100</span><span>+</span><span class="value">1</span><span>];</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">sum</span><span>[</span><span class="value">100</span><span>+</span><span class="value">1</span><span>];</span></li><li><span class="type">int</span><span>&nbsp;</span><span class="word">deque</span><span>[</span><span class="value">100</span><span>+</span><span class="value">1</span><span>],&nbsp;*</span><span class="word">qf</span><span>,&nbsp;*</span><span class="word">qb</span><span>;</span></li><li>&nbsp;</li><li><span class="type">int</span><span>&nbsp;</span><span class="word">cmp</span><span>(</span><span class="type">int</span><span>&nbsp;</span><span class="word">x1</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">x2</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">x3</span><span>,&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">x4</span><span>)</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">return</span><span>&nbsp;(</span><span class="word">sum</span><span>[</span><span class="word">x2</span><span>]&nbsp;-&nbsp;</span><span class="word">sum</span><span>[</span><span class="word">x1</span><span>&nbsp;-&nbsp;</span><span class="value">1</span><span>])&nbsp;*&nbsp;(</span><span class="word">x4</span><span>&nbsp;-&nbsp;</span><span class="word">x3</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;(</span><span class="word">sum</span><span>[</span><span class="word">x4</span><span>]&nbsp;-&nbsp;</span><span class="word">sum</span><span>[</span><span class="word">x3</span><span>&nbsp;-&nbsp;</span><span class="value">1</span><span>])&nbsp;*&nbsp;(</span><span class="word">x2</span><span>&nbsp;-&nbsp;</span><span class="word">x1</span><span>&nbsp;+&nbsp;</span><span class="value">1</span><span>);</span></li><li><span>}</span></li><li>&nbsp;</li><li><span class="keyword">void</span><span>&nbsp;</span><span class="word">maximum_average_subarray</span><span>()</span></li><li><span>{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>&nbsp;=&nbsp;</span><span class="value">1</span><span>;&nbsp;</span><span class="word">i</span><span>&nbsp;&lt;=&nbsp;</span><span class="word">N</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">sum</span><span>[</span><span class="word">i</span><span>]&nbsp;=&nbsp;</span><span class="word">sum</span><span>[</span><span class="word">i</span><span>-</span><span class="value">1</span><span>]&nbsp;+&nbsp;</span><span class="word">a</span><span>[</span><span class="word">i</span><span>];</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">ansL</span><span>&nbsp;=&nbsp;</span><span class="value">1</span><span>,&nbsp;</span><span class="word">ansR</span><span>&nbsp;=&nbsp;</span><span class="word">L</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">qf</span><span>&nbsp;=&nbsp;</span><span class="word">qb</span><span>&nbsp;=&nbsp;</span><span class="word">deque</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">for</span><span>&nbsp;(</span><span class="type">int</span><span>&nbsp;</span><span class="word">i</span><span>&nbsp;=&nbsp;</span><span class="word">L</span><span>;&nbsp;</span><span class="word">i</span><span>&nbsp;&lt;=&nbsp;</span><span class="word">N</span><span>;&nbsp;++</span><span class="word">i</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;{</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">while</span><span>&nbsp;(</span><span class="word">qb</span><span>-</span><span class="word">qf</span><span>&nbsp;&gt;=&nbsp;</span><span class="value">2</span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="word">cmp</span><span>(</span><span class="word">qb</span><span>[-</span><span class="value">2</span><span>],&nbsp;</span><span class="word">i</span><span>-</span><span class="word">L</span><span>,&nbsp;</span><span class="word">qb</span><span>[-</span><span class="value">1</span><span>],&nbsp;</span><span class="word">i</span><span>-</span><span class="word">L</span><span>)&nbsp;&gt;=&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="word">qb</span><span>--;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*</span><span class="word">qb</span><span>++&nbsp;=&nbsp;</span><span class="word">i</span><span>-</span><span class="word">L</span><span>+</span><span class="value">1</span><span>;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">while</span><span>&nbsp;(</span><span class="word">qb</span><span>-</span><span class="word">qf</span><span>&nbsp;&gt;=&nbsp;</span><span class="value">2</span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="word">cmp</span><span>(</span><span class="word">qf</span><span>[</span><span class="value">0</span><span>],&nbsp;</span><span class="word">i</span><span>,&nbsp;</span><span class="word">qf</span><span>[</span><span class="value">1</span><span>],&nbsp;</span><span class="word">i</span><span>)&nbsp;&lt;=&nbsp;</span><span class="value">0</span><span>)&nbsp;</span><span class="word">qf</span><span>++;</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="type">int</span><span>&nbsp;</span><span class="word">c</span><span>&nbsp;=&nbsp;</span><span class="word">cmp</span><span>(</span><span class="word">qf</span><span>[</span><span class="value">0</span><span>],&nbsp;</span><span class="word">i</span><span>,&nbsp;</span><span class="word">ansL</span><span>,&nbsp;</span><span class="word">ansR</span><span>);</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword">if</span><span>&nbsp;(</span><span class="word">c</span><span>&nbsp;&gt;&nbsp;</span><span class="value">0</span><span>&nbsp;||&nbsp;</span><span class="word">c</span><span>&nbsp;==&nbsp;</span><span class="value">0</span><span>&nbsp;&amp;&amp;&nbsp;</span><span class="word">i</span><span>&nbsp;-&nbsp;</span><span class="word">qf</span><span>[</span><span class="value">0</span><span>]&nbsp;&lt;&nbsp;</span><span class="word">ansR</span><span>&nbsp;-&nbsp;</span><span class="word">ansL</span><span>)</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">ansL</span><span>&nbsp;=&nbsp;</span><span class="word">qf</span><span>[</span><span class="value">0</span><span>],&nbsp;</span><span class="word">ansR</span><span>&nbsp;=&nbsp;</span><span class="word">i</span><span>;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}</span></li><li>&nbsp;</li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="word">cout</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">ansL</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="char">'&nbsp;'</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="word">ansR</span><span>&nbsp;&lt;&lt;&nbsp;</span><span class="char">'\n'</span><span>;</span></li><li><span>}</span></li></ol></div>
<p class="e">ICPC <a href="http://icpcarchive.ecs.baylor.edu/external/47/4726.pdf">4726</a> <a href="http://icpcarchive.ecs.baylor.edu/external/37/3716.pdf">3716</a></p>
</div></div><script src="./Maximum Subarray_files/h.js.下载"></script><div class="m"><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/index.html">◀ Index</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/MaximumSubarray.html#1">Largest Empty Interval</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/MaximumSubarray.html#2">Largest Empty Rectangle</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/MaximumSubarray.html#3">Largest Empty Square</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/MaximumSubarray.html#4">Maximum Sum Subarray</a></div><div class="li"><a href="http://www.csie.ntnu.edu.tw/~u91029/MaximumSubarray.html#5">Maximum Average Subarray</a></div></div></body></html>